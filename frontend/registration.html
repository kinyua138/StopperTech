<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Registration - Stopper Tech</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/registration.css">
    <style>
        /* Custom Cursor Styles */
        .cursor {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: #3498db;
            position: fixed;
            pointer-events: none;
            mix-blend-mode: difference;
            z-index: 9999;
            transform: translate(-50%, -50%);
            transition: all 0.1s ease-out;
            opacity: 1;
        }
        
        .cursor-grow {
            transform: translate(-50%, -50%) scale(1.5);
            background-color: #e74c3c;
        }

        /* Hide default cursor */
        * {
            cursor: none !important;
        }

        /* Show default cursor on form elements for better UX */
        input, textarea, select, button {
            cursor: pointer !important;
        }

        input[type="text"], input[type="email"], input[type="tel"], textarea {
            cursor: text !important;
        }
    </style>
</head>
<body>
    <!-- Custom Cursor -->
    <div class="cursor"></div>

    <!-- Header Section -->
    <header id="header">
        <div class="header-container">
            <div class="logo-circle-container">
                <svg class="logo-circle-svg" viewBox="0 0 140 140">
                    <defs>
                        <path id="circlePath" d="M70,70 m-60,0 a60,60 0 1,1 120,0 a60,60 0 1,1 -120,0"/>
                    </defs>
                    <text class="logo-circle-text">
                        <textPath xlink:href="#circlePath" startOffset="0" text-anchor="middle" method="stretch" spacing="auto">
                            Stopper Tech • Stopper Tech • Stopper Tech • Stopper Tech • Stopper Tech • Stopper Tech •
                        </textPath>
                    </text>
                </svg>
                <img src="Stopper_tech.png" alt="Logo" class="logo-center-image" />
            </div>
            <nav>
                <ul>
                    <li><a href="stopper.html">Home</a></li>
                    <li><a href="services.html">Services</a></li>
                    <li><a href="registration.html">Student Registration</a></li>
                    <li><a href="testimonials.html">Testimonials</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Student Registration Section -->
    <section class="student-registration" id="registration">
        <div class="registration-container">
            <div class="registration-content">
                <h2>Student Registration Services</h2>
                <p>We specialize in assisting students with all their academic registration needs. Our expert team will guide you through every step of the process to ensure your applications are completed accurately and submitted on time.</p>
                
                <ul>
                    <li>University/College admission forms</li>
                    <li>Online course registration</li>
                    <li>Scholarship & financial aid applications</li>
                    <li>Exam registration & hall ticket download</li>
                    <li>Project submission assistance</li>
                    <li>Resume & cover letter preparation</li>
                </ul>
                
                <a href="contact.html" class="btn">Get Assistance Now</a>
            </div>
            
            <div class="registration-form">
                <h3>Student Registration Form</h3>
                <form id="registrationForm">
                    <div class="form-group">
                        <label for="fullname">Full Name</label>
                        <input type="text" id="fullname" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="location">Location</label>
                        <input type="text" id="location" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="service">Required Service</label>
                        <select id="service" required>
                            <option value="">Select a service</option>
                            <option value="helb">Helb Application</option>
                            <option value="exam">Computer Packages Registration</option>
                            <option value="kuccps">KUCCPS Application</option>
                            <option value="project">School Project </option>
                            <option value="visa">Visa Application</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="message">Additional Information</label>
                        <textarea id="message" rows="4"></textarea>
                    </div>
                    
                    <button type="submit" class="btn" id="submitBtn">Submit Registration</button>
                    <p id="formMessage" style="margin-top: 1rem; font-weight: bold;"></p>
                    <div id="loadingIndicator" style="display: none; text-align: center; margin-top: 1rem;">
                        <i class="fas fa-spinner fa-spin" style="font-size: 24px; color: #3498db;"></i>
                        <p style="margin-top: 0.5rem;">Processing your registration...</p>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-col">
                <h3>About Us</h3>
                <p>Stopper Tech has been serving the community since 2019 with reliable IT solutions and cyber cafe services. We're committed to providing quality service with a personal touch.</p>
            </div>
            
            <div class="footer-col">
                <h3>Our Services</h3>
                <ul>
                    <li><a href="#">Cyber Cafe</a></li>
                    <li><a href="#">Software Installation</a></li>
                    <li><a href="#">Government Services</a></li>
                    <li><a href="#">Student Registration</a></li>
                    <li><a href="#">Computer Repair</a></li>
                </ul>
            </div>
            
            <div class="footer-col">
                <h3>Help & Support</h3>
                <ul>
                    <li><a href="#">FAQs</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms & Conditions</a></li>
                    <li><a href="#">Service Charges</a></li>
                    <li><a href="#">Support Center</a></li>
                </ul>
            </div>
            
            <div class="footer-col">
                <h3>Newsletter</h3>
                <p>Subscribe to our newsletter for updates on new services and special offers.</p>
                <form class="newsletter-form">
                    <input type="email" placeholder="Your Email" required>
                    <button type="submit"><i class="fas fa-paper-plane"></i></button>
                </form>
            </div>
        </div>
        
        <div class="copyright">
            <p>&copy; 2019 Stopper Tech. All Rights Reserved. | Designed with <i class="fas fa-heart" style="color: #e74c3c;"></i> by Stopper Tech Team</p>
        </div>
    </footer>

    <!-- Optimized Cursor Script -->
    <script>
        // Optimized Custom Cursor for Better Performance
        const cursor = document.querySelector('.cursor');
        let mouseX = 0;
        let mouseY = 0;
        let isMoving = false;
        let animationId = null;
        
        // Throttle function to limit event frequency
        function throttle(func, limit) {
            let inThrottle;
            return function() {
                const args = arguments;
                const context = this;
                if (!inThrottle) {
                    func.apply(context, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            }
        }
        
        // Track mouse position with throttling
        const handleMouseMove = throttle((e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            
            if (!isMoving) {
                isMoving = true;
                startCursorAnimation();
            }
        }, 16); // ~60fps
        
        document.addEventListener('mousemove', handleMouseMove);
        
        // Optimized cursor animation using transform3d
        function animateCursor() {
            // Use transform3d for hardware acceleration
            cursor.style.transform = `translate3d(${mouseX}px, ${mouseY}px, 0)`;
            
            // Stop animation when mouse stops moving
            let timeout = setTimeout(() => {
                isMoving = false;
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
            }, 100);
            
            if (isMoving) {
                animationId = requestAnimationFrame(animateCursor);
            }
        }
        
        function startCursorAnimation() {
            if (!animationId) {
                animationId = requestAnimationFrame(animateCursor);
            }
        }
        
        // Hide cursor when mouse leaves window
        document.addEventListener('mouseleave', () => {
            cursor.style.opacity = '0';
            isMoving = false;
            if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
            }
        });
        
        // Show cursor when mouse enters window
        document.addEventListener('mouseenter', () => {
            cursor.style.opacity = '1';
        });
        
        // Cursor grow effect when hovering over clickable elements
        const clickables = document.querySelectorAll('a, button, input[type="submit"], .service-card, input, textarea, select');
        
        clickables.forEach(item => {
            item.addEventListener('mouseenter', () => {
                cursor.classList.add('cursor-grow');
            });
            item.addEventListener('mouseleave', () => {
                cursor.classList.remove('cursor-grow');
            });
        });
        
        // Header scroll effect with hide on scroll down, show on scroll up
        let lastScrollTop = 0;
        const header = document.getElementById('header');
        window.addEventListener('scroll', () => {
            let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            if (scrollTop > lastScrollTop && scrollTop > 50) {
                // Scrolling down
                header.style.transform = 'translateY(-100%)';
            } else {
                // Scrolling up
                header.style.transform = 'translateY(0)';
            }
            lastScrollTop = scrollTop <= 0 ? 0 : scrollTop; // For Mobile or negative scrolling

            // Also toggle scrolled class for styling
            if (scrollTop > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // Registration form submission handler
        document.getElementById('registrationForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const formMessage = document.getElementById('formMessage');
            const loadingIndicator = document.getElementById('loadingIndicator');
            
            // Get form data
            const formData = {
                fullname: document.getElementById('fullname').value.trim(),
                email: document.getElementById('email').value.trim(),
                phone: document.getElementById('phone').value.trim(),
                location: document.getElementById('location').value.trim(),
                service: document.getElementById('service').value,
                message: document.getElementById('message').value.trim()
            };
            
            // Basic client-side validation
            if (!formData.fullname || !formData.email || !formData.phone || !formData.location || !formData.service) {
                formMessage.textContent = 'Please fill in all required fields.';
                formMessage.style.color = '#e74c3c';
                return;
            }
            
            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(formData.email)) {
                formMessage.textContent = 'Please enter a valid email address.';
                formMessage.style.color = '#e74c3c';
                return;
            }
            
            // Show loading state
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';
            loadingIndicator.style.display = 'block';
            formMessage.textContent = '';
            
            try {
                const response = await fetch('/api/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    // Success
                    formMessage.textContent = result.message || 'Registration successful!';
                    formMessage.style.color = '#27ae60';
                    
                    // Reset form
                    document.getElementById('registrationForm').reset();
                    
                    // Scroll to success message
                    formMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                } else {
                    // Error from server
                    formMessage.textContent = result.details || result.error || 'Registration failed. Please try again.';
                    formMessage.style.color = '#e74c3c';
                }
            } catch (error) {
                console.error('Registration error:', error);
                formMessage.textContent = 'Network error. Please check your connection and try again.';
                formMessage.style.color = '#e74c3c';
            } finally {
                // Reset button state
                submitBtn.disabled = false;
                submitBtn.textContent = 'Submit Registration';
                loadingIndicator.style.display = 'none';
            }
        });
    </script>
</body>
</html>